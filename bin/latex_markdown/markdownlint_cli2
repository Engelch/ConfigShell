#!/usr/bin/env bash

export DebugFlag=${DebugFlag:-FALSE}
function debugSet()             { DebugFlag="TRUE"; return 0; }
function debug()                { [ "$DebugFlag" = TRUE ] && echo 'DEBUG:'"$*" 1>&2 ; return 0; }

[ "$1" = '-D' ] && shift && debugSet
[ "$1" = '--debug' ] && shift && debugSet

[ $# -eq 0 ] && { 1>&2 echo ERROR no filename supplied; exit 1 ; }
[ $# -gt 1 ] && { 1>&2 echo ERROR only one filename can be supplied; exit 2 ; }

_dir="$(realpath "$(dirname "$1")")"
debug workdir is: $_dir

debug container.sh run -v "$_dir":/workdir davidanson/markdownlint-cli2:latest "$(basename "$1")"
container.sh run -v "$_dir":/workdir davidanson/markdownlint-cli2:latest "$(basename "$1")"
